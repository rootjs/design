\chapter{Introduction}
\section{About this document}
This document describes the structure of RootJS, it will be used as a blueprint in the implementation phase.

The document contains descriptions to all public methods, so that the implementation can be split up. It contains all classes that need to be implemented, descriptions to all public methods and, listed in the UML diagram in the appendix, some private functions and properties that might be handy during implementation.

\section{Overview}
When using node moldues to extend the basic node API, one uses the \textit{require} statement, providing the name of the module.
\textit{require} returns a JavaScript object which is called exports, containing everything the node modules decides to include.

In our case require will run the \textit{initialize} method which will crawl trough ROOT to find all globally accessible variables, functions and classes.

For all these items a property or function is being added to the exports object.
These properties are bound to a callback function which is equipped with meta data, referring to the property or function in ROOT.
With this information the callback function is able to call the actual ROOT functionality.

To send the results to node we need to convert the resulting objects or values.
In order to convert the data we will use proxies for the different datatypes that will be returned by a factory.\\

The factory will use the datatype to select a matching Proxy implementation, when dealing with non scalar data, the factory will run through all methods and properties and use the Factory recursively.\\

Even though node programs are mainly used as server applications they can still handle graphical user interfaces.
Graphical user interfaces(GUI) need to refresh frequently in order to be responsive, as JavaScript only runs one thread at a time, the GUI refresh needs to run on the same thread as the rest of the application. GUI are therefore supported as well. 

This is handled in the \textit{NodeApplication} class, furthermore we will set the application name and a callback function for messages generated by root here. The GUI is the only edge case we have identified so far, for which we have to implement the \textit{NodeApplication} class which initiates asynchronous JavaScript user interface refresher. 
